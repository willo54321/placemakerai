@tailwind base;
@tailwind components;
@tailwind utilities;

/* Protect Google Maps tiles from Tailwind's img styles */
.gm-style img {
  max-width: none !important;
  max-height: none !important;
}

@layer base {
  /* WCAG compliant focus states */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-brand-600;
  }

  /* Better text rendering */
  body {
    @apply bg-cream-100 text-slate-900 antialiased;
    font-feature-settings: "cv11", "ss01";
  }

  /* Accessible heading hierarchy */
  h1 { @apply text-2xl font-semibold tracking-tight; }
  h2 { @apply text-xl font-semibold tracking-tight; }
  h3 { @apply text-lg font-medium; }
  h4 { @apply text-base font-medium; }

  /* Reduce motion for users who prefer it */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* Sidebar navigation */
  .sidebar {
    @apply w-64 bg-white border-r border-slate-200 min-h-screen flex flex-col;
  }

  .sidebar-logo {
    @apply flex items-center gap-3 px-5 py-5 border-b border-slate-100;
  }

  .sidebar-nav {
    @apply flex-1 py-4 px-3;
  }

  .sidebar-item {
    @apply flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 rounded-lg;
    @apply hover:bg-cream-200 hover:text-slate-900;
    @apply transition-colors duration-150;
  }

  .sidebar-item-active {
    @apply sidebar-item bg-brand-50 text-brand-700;
    @apply hover:bg-brand-100;
  }

  .sidebar-item-nested {
    @apply sidebar-item pl-11 text-slate-500;
  }

  .sidebar-badge {
    @apply ml-auto bg-slate-100 text-slate-600 text-xs font-medium px-2 py-0.5 rounded-full;
  }

  /* SaaS-style buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-150;
    @apply focus-visible:outline-2 focus-visible:outline-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-brand-600 text-white hover:bg-brand-700 active:bg-brand-800;
    @apply focus-visible:outline-brand-600;
  }

  .btn-secondary {
    @apply btn bg-white text-slate-700 border border-slate-300 hover:bg-slate-50 active:bg-slate-100;
    @apply focus-visible:outline-slate-400;
  }

  .btn-danger {
    @apply btn bg-red-600 text-white hover:bg-red-700 active:bg-red-800;
    @apply focus-visible:outline-red-600;
  }

  .btn-ghost {
    @apply btn bg-transparent text-slate-600 hover:bg-slate-100 active:bg-slate-200;
    @apply focus-visible:outline-slate-400;
  }

  .btn-icon {
    @apply p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100 transition-colors;
    @apply focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400;
  }

  /* Form inputs with WCAG compliance */
  .input {
    @apply w-full px-3.5 py-2.5 text-sm bg-white border border-slate-200 rounded-xl;
    @apply placeholder:text-slate-400;
    @apply hover:border-slate-300;
    @apply focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-0 focus:border-transparent;
    @apply disabled:bg-slate-50 disabled:text-slate-500 disabled:cursor-not-allowed;
    @apply transition-colors duration-150;
  }

  .input-error {
    @apply input border-red-500 focus:ring-red-500;
  }

  .label {
    @apply block text-sm font-medium text-slate-700 mb-1.5;
  }

  .label-required::after {
    @apply text-red-500 ml-0.5;
    content: "*";
  }

  .helper-text {
    @apply text-xs text-slate-500 mt-1;
  }

  .error-text {
    @apply text-xs text-red-600 mt-1;
  }

  /* Cards - warmer style */
  .card {
    @apply bg-white rounded-2xl border border-slate-200 shadow-sm;
  }

  .card-hover {
    @apply card hover:border-slate-300 hover:shadow-md transition-all duration-200;
  }

  /* Filter panel */
  .filter-panel {
    @apply bg-white rounded-2xl border border-slate-200 p-5;
  }

  .filter-section {
    @apply mb-6 last:mb-0;
  }

  .filter-title {
    @apply text-sm font-semibold text-slate-900 mb-3;
  }

  .filter-option {
    @apply flex items-center gap-2.5 py-1.5 text-sm text-slate-600 cursor-pointer;
    @apply hover:text-slate-900;
  }

  .filter-checkbox {
    @apply w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500;
  }

  /* Status badges - warm amber style like publiq */
  .badge {
    @apply inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-md;
  }

  .badge-gray { @apply badge bg-slate-100 text-slate-600; }
  .badge-green { @apply badge bg-green-100 text-green-700; }
  .badge-amber { @apply badge bg-amber-100 text-amber-700; }
  .badge-red { @apply badge bg-red-100 text-red-700; }
  .badge-blue { @apply badge bg-blue-100 text-blue-700; }
  .badge-purple { @apply badge bg-brand-100 text-brand-700; }

  /* Status badges - specific states */
  .status-open { @apply badge bg-green-500 text-white text-[11px] font-semibold; }
  .status-in-progress { @apply badge bg-amber-400 text-amber-900 text-[11px] font-semibold; }
  .status-closed { @apply badge bg-slate-400 text-white text-[11px] font-semibold; }
  .status-deleted { @apply badge bg-red-400 text-white text-[11px] font-semibold; }

  /* Tabs - WCAG compliant */
  .tab-list {
    @apply flex gap-1 border-b border-slate-200;
  }

  .tab {
    @apply flex items-center gap-2 px-4 py-3 text-sm font-medium text-slate-600 border-b-2 border-transparent;
    @apply hover:text-slate-900 hover:border-slate-300;
    @apply focus-visible:outline-none focus-visible:bg-slate-50;
    @apply transition-colors duration-150;
  }

  .tab[aria-selected="true"], .tab-active {
    @apply text-brand-600 border-brand-600;
  }

  /* Tables - cleaner style */
  .table-container {
    @apply bg-white rounded-2xl border border-slate-200 overflow-hidden;
  }

  .table-header {
    @apply text-left text-xs font-semibold text-slate-500 uppercase tracking-wider bg-cream-100;
  }

  .table-cell {
    @apply px-4 py-3.5 text-sm text-slate-700;
  }

  .table-row {
    @apply border-b border-slate-100 hover:bg-cream-50 transition-colors;
  }

  .table-action {
    @apply text-brand-600 hover:text-brand-700 font-medium text-sm;
  }

  /* Modal/Dialog */
  .modal-overlay {
    @apply fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50;
  }

  .modal {
    @apply fixed inset-0 z-50 flex items-center justify-center p-4;
  }

  .modal-content {
    @apply bg-white rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-auto;
  }

  /* Loading states */
  .skeleton {
    @apply animate-pulse bg-slate-200 rounded;
  }

  .spinner {
    @apply animate-spin h-5 w-5 border-2 border-slate-300 border-t-brand-600 rounded-full;
  }

  /* Status indicators with text alternatives */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .status-approved { @apply status-dot bg-green-500; }
  .status-pending { @apply status-dot bg-amber-500; }
  .status-rejected { @apply status-dot bg-red-500; }

  /* Skip link for keyboard navigation */
  .skip-link {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50;
    @apply focus:px-4 focus:py-2 focus:bg-brand-600 focus:text-white focus:rounded-lg;
  }

  /* Visually hidden but accessible */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }

  /* Search input */
  .search-input {
    @apply w-full pl-10 pr-4 py-3 text-sm bg-white border border-slate-200 rounded-xl;
    @apply placeholder:text-slate-400;
    @apply focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent;
  }

  /* Dropdown select */
  .select {
    @apply px-4 py-2.5 text-sm bg-white border border-slate-200 rounded-xl;
    @apply focus:outline-none focus:ring-2 focus:ring-brand-500;
    @apply appearance-none cursor-pointer;
  }

  /* Project checkbox list */
  .project-checkbox {
    @apply flex items-center gap-2.5 py-1.5;
  }

  .project-checkbox input[type="checkbox"] {
    @apply w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500;
  }
}
